{"ast":null,"code":"// 管理电子商务应用中的状态和操作\nimport axios from 'axios';\nconst CATEGORIES_FETCHED = 'my-app/ecommerce/categorie/index';\nconst CATEGORY_DELETED = 'my-app/ecommerce/categorie/delete';\nconst CATEGORY_CREATED = 'my-app/ecommerce/categorie/create';\nconst PRODUCTS_FETCHED = 'my-app/ecommerce/product/index';\nconst PRODUCT_DELETED = 'my-app/ecommerce/product/delete';\nconst PRODUCT_CREATED = 'my-app/ecommerce/product/create';\nconst CART_ADDED_ITEM = 'my-app/ecommerce/cart/add';\nconst CART_DELETED_ITEM = 'my-app/ecommerce/cart/delete';\n\nconst reducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    cart: [],\n    categories: [],\n    products: []\n  };\n  let action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  switch (action.type) {\n    case CATEGORIES_FETCHED:\n      return { ...state,\n        categories: action.payload\n      };\n\n    case CATEGORY_DELETED:\n      return { ...state,\n        categories: [...state.categories.filter(categorie => categorie.id !== action.payload)]\n      };\n\n    case CATEGORY_CREATED:\n      return { ...state,\n        categories: [...state.categories, action.payload]\n      };\n\n    case PRODUCT_CREATED:\n      return { ...state,\n        products: [...state.products, action.payload]\n      };\n\n    case PRODUCT_DELETED:\n      return { ...state,\n        products: [...state.products.filter(product => product.id !== action.payload)]\n      };\n\n    case PRODUCTS_FETCHED:\n      return { ...state,\n        products: action.payload\n      };\n\n    case CART_ADDED_ITEM:\n      if (state.cart.includes(action.payload)) return state;\n      return { ...state,\n        cart: [...state.cart, action.payload]\n      };\n\n    case CART_DELETED_ITEM:\n      return { ...state,\n        cart: [...state.cart.filter(item => item.id !== action.payload)]\n      };\n\n    default:\n      return state;\n  }\n}; // 动作的创建\n\n\nexport const loadCategories = categories => ({\n  type: CATEGORIES_FETCHED,\n  payload: categories\n});\nexport const loadProducts = products => ({\n  type: PRODUCTS_FETCHED,\n  payload: products\n});\nexport const addToCart = item => ({\n  type: CART_ADDED_ITEM,\n  payload: item\n});\nexport const deleteFromCart = id => ({\n  type: CART_DELETED_ITEM,\n  payload: id\n}); // 删除\n\nexport const removeCategorie = id => ({\n  type: CATEGORY_DELETED,\n  payload: id\n});\nexport const removeItem = id => ({\n  type: PRODUCT_DELETED,\n  payload: id\n}); // 创建\n\nexport const addCategorie = categorie => ({\n  type: CATEGORY_CREATED,\n  payload: categorie\n});\nexport const addProduct = product => ({\n  type: PRODUCT_CREATED,\n  payload: product\n}); // Thunks\n\nexport const fetchInitialData = () => async dispatch => {\n  const categoriesResponse = await axios.get('https://api.escuelajs.co/api/v1/categories');\n  dispatch(loadCategories(categoriesResponse.data));\n  const productsResponse = await axios.get('https://api.escuelajs.co/api/v1/products');\n  dispatch(loadProducts(productsResponse.data));\n};\nexport const deleteCategorie = id => async dispatch => {\n  const response = await axios.delete(`https://api.escuelajs.co/api/v1/categories/${id}`);\n\n  if (response.data) {\n    dispatch(removeCategorie(id));\n  }\n};\nexport const deleteItem = id => async dispatch => {\n  const response = await axios.delete(`https://api.escuelajs.co/api/v1/products/${id}`);\n\n  if (response.data) {\n    dispatch(removeItem(id));\n  }\n};\nexport const createProduct = (title, price, description, img, categoryId) => async dispatch => {\n  const data = {\n    title,\n    price,\n    description,\n    categoryId,\n    images: [img]\n  };\n  const response = await axios.post('https://api.escuelajs.co/api/v1/products/', data);\n\n  if (response) {\n    dispatch(addProduct(response.data));\n  }\n};\nexport const createCategorie = (name, image) => async dispatch => {\n  const data = {\n    name,\n    image\n  };\n  const response = await axios.post('https://api.escuelajs.co/api/v1/categories/', data);\n\n  if (response) {\n    dispatch(addCategorie(response.data));\n  }\n};\nexport default reducer;","map":{"version":3,"names":["axios","CATEGORIES_FETCHED","CATEGORY_DELETED","CATEGORY_CREATED","PRODUCTS_FETCHED","PRODUCT_DELETED","PRODUCT_CREATED","CART_ADDED_ITEM","CART_DELETED_ITEM","reducer","state","cart","categories","products","action","type","payload","filter","categorie","id","product","includes","item","loadCategories","loadProducts","addToCart","deleteFromCart","removeCategorie","removeItem","addCategorie","addProduct","fetchInitialData","dispatch","categoriesResponse","get","data","productsResponse","deleteCategorie","response","delete","deleteItem","createProduct","title","price","description","img","categoryId","images","post","createCategorie","name","image"],"sources":["D:/new_fiel/sss/e-commerce/src/redux/ecommerce/ecommerce.js"],"sourcesContent":["// 管理电子商务应用中的状态和操作\r\n\r\nimport axios from 'axios';\r\n\r\nconst CATEGORIES_FETCHED = 'my-app/ecommerce/categorie/index';\r\nconst CATEGORY_DELETED = 'my-app/ecommerce/categorie/delete';\r\nconst CATEGORY_CREATED = 'my-app/ecommerce/categorie/create';\r\nconst PRODUCTS_FETCHED = 'my-app/ecommerce/product/index';\r\nconst PRODUCT_DELETED = 'my-app/ecommerce/product/delete';\r\nconst PRODUCT_CREATED = 'my-app/ecommerce/product/create';\r\nconst CART_ADDED_ITEM = 'my-app/ecommerce/cart/add';\r\nconst CART_DELETED_ITEM = 'my-app/ecommerce/cart/delete';\r\n\r\n\r\nconst reducer = (\r\n  state = { cart: [], categories: [], products: [] },\r\n  action = {},\r\n) => {\r\n  switch (action.type) {\r\n    case CATEGORIES_FETCHED:\r\n      return { ...state, categories: action.payload };\r\n    case CATEGORY_DELETED:\r\n      return {\r\n        ...state,\r\n        categories: [\r\n          ...state.categories.filter(\r\n            (categorie) => categorie.id !== action.payload,\r\n          ),\r\n        ],\r\n      };\r\n    case CATEGORY_CREATED:\r\n      return {\r\n        ...state,\r\n        categories: [...state.categories, action.payload],\r\n      };\r\n    case PRODUCT_CREATED:\r\n      return {\r\n        ...state,\r\n        products: [...state.products, action.payload],\r\n      };\r\n    case PRODUCT_DELETED:\r\n      return {\r\n        ...state,\r\n        products: [\r\n          ...state.products.filter((product) => product.id !== action.payload),\r\n        ],\r\n      };\r\n    case PRODUCTS_FETCHED:\r\n      return { ...state, products: action.payload };\r\n    case CART_ADDED_ITEM:\r\n      if (state.cart.includes(action.payload)) return state;\r\n      return { ...state, cart: [...state.cart, action.payload] };\r\n    case CART_DELETED_ITEM:\r\n      return {\r\n        ...state,\r\n        cart: [...state.cart.filter((item) => item.id !== action.payload)],\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// 动作的创建\r\nexport const loadCategories = (categories) => ({\r\n  type: CATEGORIES_FETCHED,\r\n  payload: categories,\r\n});\r\nexport const loadProducts = (products) => ({\r\n  type: PRODUCTS_FETCHED,\r\n  payload: products,\r\n});\r\nexport const addToCart = (item) => ({ type: CART_ADDED_ITEM, payload: item });\r\nexport const deleteFromCart = (id) => ({\r\n  type: CART_DELETED_ITEM,\r\n  payload: id,\r\n});\r\n// 删除\r\nexport const removeCategorie = (id) => ({\r\n  type: CATEGORY_DELETED,\r\n  payload: id,\r\n});\r\n\r\nexport const removeItem = (id) => ({\r\n  type: PRODUCT_DELETED,\r\n  payload: id,\r\n});\r\n// 创建\r\nexport const addCategorie = (categorie) => ({\r\n  type: CATEGORY_CREATED,\r\n  payload: categorie,\r\n});\r\n\r\nexport const addProduct = (product) => ({\r\n  type: PRODUCT_CREATED,\r\n  payload: product,\r\n});\r\n\r\n// Thunks\r\nexport const fetchInitialData = () => async (dispatch) => {\r\n  const categoriesResponse = await axios.get(\r\n    'https://api.escuelajs.co/api/v1/categories',\r\n  );\r\n  dispatch(loadCategories(categoriesResponse.data));\r\n  const productsResponse = await axios.get(\r\n    'https://api.escuelajs.co/api/v1/products',\r\n  );\r\n  dispatch(loadProducts(productsResponse.data));\r\n};\r\n\r\nexport const deleteCategorie = (id) => async (dispatch) => {\r\n  const response = await axios.delete(\r\n    `https://api.escuelajs.co/api/v1/categories/${id}`,\r\n  );\r\n  if (response.data) {\r\n    dispatch(removeCategorie(id));\r\n  }\r\n};\r\n\r\nexport const deleteItem = (id) => async (dispatch) => {\r\n  const response = await axios.delete(\r\n    `https://api.escuelajs.co/api/v1/products/${id}`,\r\n  );\r\n  if (response.data) {\r\n    dispatch(removeItem(id));\r\n  }\r\n};\r\n\r\nexport const createProduct = (title, price, description, img, categoryId) => async (dispatch) => {\r\n  const data = {\r\n    title,\r\n    price,\r\n    description,\r\n    categoryId,\r\n    images: [img],\r\n  };\r\n\r\n  const response = await axios.post('https://api.escuelajs.co/api/v1/products/', data);\r\n\r\n  if (response) {\r\n    dispatch(addProduct(response.data));\r\n  }\r\n};\r\n\r\nexport const createCategorie = (name, image) => async (dispatch) => {\r\n  const data = {\r\n    name,\r\n    image,\r\n  };\r\n  const response = await axios.post(\r\n    'https://api.escuelajs.co/api/v1/categories/',\r\n    data,\r\n  );\r\n  if (response) {\r\n    dispatch(addCategorie(response.data));\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n"],"mappings":"AAAA;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,kBAAkB,GAAG,kCAA3B;AACA,MAAMC,gBAAgB,GAAG,mCAAzB;AACA,MAAMC,gBAAgB,GAAG,mCAAzB;AACA,MAAMC,gBAAgB,GAAG,gCAAzB;AACA,MAAMC,eAAe,GAAG,iCAAxB;AACA,MAAMC,eAAe,GAAG,iCAAxB;AACA,MAAMC,eAAe,GAAG,2BAAxB;AACA,MAAMC,iBAAiB,GAAG,8BAA1B;;AAGA,MAAMC,OAAO,GAAG,YAGX;EAAA,IAFHC,KAEG,uEAFK;IAAEC,IAAI,EAAE,EAAR;IAAYC,UAAU,EAAE,EAAxB;IAA4BC,QAAQ,EAAE;EAAtC,CAEL;EAAA,IADHC,MACG,uEADM,EACN;;EACH,QAAQA,MAAM,CAACC,IAAf;IACE,KAAKd,kBAAL;MACE,OAAO,EAAE,GAAGS,KAAL;QAAYE,UAAU,EAAEE,MAAM,CAACE;MAA/B,CAAP;;IACF,KAAKd,gBAAL;MACE,OAAO,EACL,GAAGQ,KADE;QAELE,UAAU,EAAE,CACV,GAAGF,KAAK,CAACE,UAAN,CAAiBK,MAAjB,CACAC,SAAD,IAAeA,SAAS,CAACC,EAAV,KAAiBL,MAAM,CAACE,OADtC,CADO;MAFP,CAAP;;IAQF,KAAKb,gBAAL;MACE,OAAO,EACL,GAAGO,KADE;QAELE,UAAU,EAAE,CAAC,GAAGF,KAAK,CAACE,UAAV,EAAsBE,MAAM,CAACE,OAA7B;MAFP,CAAP;;IAIF,KAAKV,eAAL;MACE,OAAO,EACL,GAAGI,KADE;QAELG,QAAQ,EAAE,CAAC,GAAGH,KAAK,CAACG,QAAV,EAAoBC,MAAM,CAACE,OAA3B;MAFL,CAAP;;IAIF,KAAKX,eAAL;MACE,OAAO,EACL,GAAGK,KADE;QAELG,QAAQ,EAAE,CACR,GAAGH,KAAK,CAACG,QAAN,CAAeI,MAAf,CAAuBG,OAAD,IAAaA,OAAO,CAACD,EAAR,KAAeL,MAAM,CAACE,OAAzD,CADK;MAFL,CAAP;;IAMF,KAAKZ,gBAAL;MACE,OAAO,EAAE,GAAGM,KAAL;QAAYG,QAAQ,EAAEC,MAAM,CAACE;MAA7B,CAAP;;IACF,KAAKT,eAAL;MACE,IAAIG,KAAK,CAACC,IAAN,CAAWU,QAAX,CAAoBP,MAAM,CAACE,OAA3B,CAAJ,EAAyC,OAAON,KAAP;MACzC,OAAO,EAAE,GAAGA,KAAL;QAAYC,IAAI,EAAE,CAAC,GAAGD,KAAK,CAACC,IAAV,EAAgBG,MAAM,CAACE,OAAvB;MAAlB,CAAP;;IACF,KAAKR,iBAAL;MACE,OAAO,EACL,GAAGE,KADE;QAELC,IAAI,EAAE,CAAC,GAAGD,KAAK,CAACC,IAAN,CAAWM,MAAX,CAAmBK,IAAD,IAAUA,IAAI,CAACH,EAAL,KAAYL,MAAM,CAACE,OAA/C,CAAJ;MAFD,CAAP;;IAIF;MACE,OAAON,KAAP;EAxCJ;AA0CD,CA9CD,C,CAgDA;;;AACA,OAAO,MAAMa,cAAc,GAAIX,UAAD,KAAiB;EAC7CG,IAAI,EAAEd,kBADuC;EAE7Ce,OAAO,EAAEJ;AAFoC,CAAjB,CAAvB;AAIP,OAAO,MAAMY,YAAY,GAAIX,QAAD,KAAe;EACzCE,IAAI,EAAEX,gBADmC;EAEzCY,OAAO,EAAEH;AAFgC,CAAf,CAArB;AAIP,OAAO,MAAMY,SAAS,GAAIH,IAAD,KAAW;EAAEP,IAAI,EAAER,eAAR;EAAyBS,OAAO,EAAEM;AAAlC,CAAX,CAAlB;AACP,OAAO,MAAMI,cAAc,GAAIP,EAAD,KAAS;EACrCJ,IAAI,EAAEP,iBAD+B;EAErCQ,OAAO,EAAEG;AAF4B,CAAT,CAAvB,C,CAIP;;AACA,OAAO,MAAMQ,eAAe,GAAIR,EAAD,KAAS;EACtCJ,IAAI,EAAEb,gBADgC;EAEtCc,OAAO,EAAEG;AAF6B,CAAT,CAAxB;AAKP,OAAO,MAAMS,UAAU,GAAIT,EAAD,KAAS;EACjCJ,IAAI,EAAEV,eAD2B;EAEjCW,OAAO,EAAEG;AAFwB,CAAT,CAAnB,C,CAIP;;AACA,OAAO,MAAMU,YAAY,GAAIX,SAAD,KAAgB;EAC1CH,IAAI,EAAEZ,gBADoC;EAE1Ca,OAAO,EAAEE;AAFiC,CAAhB,CAArB;AAKP,OAAO,MAAMY,UAAU,GAAIV,OAAD,KAAc;EACtCL,IAAI,EAAET,eADgC;EAEtCU,OAAO,EAAEI;AAF6B,CAAd,CAAnB,C,CAKP;;AACA,OAAO,MAAMW,gBAAgB,GAAG,MAAM,MAAOC,QAAP,IAAoB;EACxD,MAAMC,kBAAkB,GAAG,MAAMjC,KAAK,CAACkC,GAAN,CAC/B,4CAD+B,CAAjC;EAGAF,QAAQ,CAACT,cAAc,CAACU,kBAAkB,CAACE,IAApB,CAAf,CAAR;EACA,MAAMC,gBAAgB,GAAG,MAAMpC,KAAK,CAACkC,GAAN,CAC7B,0CAD6B,CAA/B;EAGAF,QAAQ,CAACR,YAAY,CAACY,gBAAgB,CAACD,IAAlB,CAAb,CAAR;AACD,CATM;AAWP,OAAO,MAAME,eAAe,GAAIlB,EAAD,IAAQ,MAAOa,QAAP,IAAoB;EACzD,MAAMM,QAAQ,GAAG,MAAMtC,KAAK,CAACuC,MAAN,CACpB,8CAA6CpB,EAAG,EAD5B,CAAvB;;EAGA,IAAImB,QAAQ,CAACH,IAAb,EAAmB;IACjBH,QAAQ,CAACL,eAAe,CAACR,EAAD,CAAhB,CAAR;EACD;AACF,CAPM;AASP,OAAO,MAAMqB,UAAU,GAAIrB,EAAD,IAAQ,MAAOa,QAAP,IAAoB;EACpD,MAAMM,QAAQ,GAAG,MAAMtC,KAAK,CAACuC,MAAN,CACpB,4CAA2CpB,EAAG,EAD1B,CAAvB;;EAGA,IAAImB,QAAQ,CAACH,IAAb,EAAmB;IACjBH,QAAQ,CAACJ,UAAU,CAACT,EAAD,CAAX,CAAR;EACD;AACF,CAPM;AASP,OAAO,MAAMsB,aAAa,GAAG,CAACC,KAAD,EAAQC,KAAR,EAAeC,WAAf,EAA4BC,GAA5B,EAAiCC,UAAjC,KAAgD,MAAOd,QAAP,IAAoB;EAC/F,MAAMG,IAAI,GAAG;IACXO,KADW;IAEXC,KAFW;IAGXC,WAHW;IAIXE,UAJW;IAKXC,MAAM,EAAE,CAACF,GAAD;EALG,CAAb;EAQA,MAAMP,QAAQ,GAAG,MAAMtC,KAAK,CAACgD,IAAN,CAAW,2CAAX,EAAwDb,IAAxD,CAAvB;;EAEA,IAAIG,QAAJ,EAAc;IACZN,QAAQ,CAACF,UAAU,CAACQ,QAAQ,CAACH,IAAV,CAAX,CAAR;EACD;AACF,CAdM;AAgBP,OAAO,MAAMc,eAAe,GAAG,CAACC,IAAD,EAAOC,KAAP,KAAiB,MAAOnB,QAAP,IAAoB;EAClE,MAAMG,IAAI,GAAG;IACXe,IADW;IAEXC;EAFW,CAAb;EAIA,MAAMb,QAAQ,GAAG,MAAMtC,KAAK,CAACgD,IAAN,CACrB,6CADqB,EAErBb,IAFqB,CAAvB;;EAIA,IAAIG,QAAJ,EAAc;IACZN,QAAQ,CAACH,YAAY,CAACS,QAAQ,CAACH,IAAV,CAAb,CAAR;EACD;AACF,CAZM;AAcP,eAAe1B,OAAf"},"metadata":{},"sourceType":"module"}